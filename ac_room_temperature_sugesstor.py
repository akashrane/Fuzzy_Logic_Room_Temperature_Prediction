# -*- coding: utf-8 -*-
"""AC_Room_Temperature_Sugesstor.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/13TISTVYjO-zzktE1GJbvlGS1MhTlT94v
"""

import numpy as np
!pip install scikit-fuzzy
import skfuzzy as fuzz
from skfuzzy import control as ctrl

temp= ctrl.Antecedent(np.arange(0, 41), 'temperature')
hum = ctrl.Antecedent(np.arange(0, 101), 'humidity')
cmd = ctrl.Consequent(np.arange(15, 26), 'command')

temp['coldest'] = fuzz.trapmf(temp.universe, [0, 4, 6, 8])
temp['cold'] = fuzz.trapmf(temp.universe, [6, 10, 12, 16])
temp['warm'] = fuzz.trapmf(temp.universe, [12, 16, 18, 24])
temp['hot'] = fuzz.trapmf(temp.universe, [18, 22, 24, 32])
temp['hottest'] = fuzz.trapmf(temp.universe, [24, 28, 30, 40])

hum['low'] = fuzz.gaussmf(hum.universe, 0, 15)
hum['optimal'] = fuzz.gaussmf(hum.universe, 50, 15)
hum['high'] = fuzz.gaussmf(hum.universe, 100, 15)

cmd['cool'] = fuzz.trimf(cmd.universe, [15, 17, 20])
cmd['warmup'] = fuzz.trimf(cmd.universe, [18, 20, 26])

rule1 = ctrl.Rule(
 (temp['coldest'] & hum['low']) |
 (temp['coldest'] & hum['optimal']) |
 (temp['coldest'] & hum['high']) |
 (temp['cold'] & hum['low']) |
 (temp['cold'] & hum['optimal']) |
 (temp['warm'] & hum['low']), cmd['warmup'])

rule2 = ctrl.Rule(
 (temp['warm'] & hum['optimal']) |
 (temp['warm'] & hum['high']) |
 (temp['hot'] & hum['optimal']) |
 (temp['hot'] & hum['high']) |
 (temp['hottest'] & hum['low']) |
 (temp['hottest'] & hum['optimal']) |
 (temp['hottest'] & hum['high']), cmd['cool'])

cmd_ctrl = ctrl.ControlSystem([rule1, rule2])
cmd_output = ctrl.ControlSystemSimulation(cmd_ctrl)

temperature_value = float(input("Enter temperature: "))
while temperature_value < 0 or temperature_value > 40:
  try:
    temperature_value = float(input("Please choose a number between 0 and 40 "))
  except ValueError:
    print('We expect you to enter a valid integer')

humidity_value = float(input("Enter humidity: "))

while humidity_value < 0 or humidity_value > 100:
  try:
    humidity_value = float(input("Please choose a number between 0 and 100 "))
  except ValueError:
    print('We expect you to enter a valid integer')

cmd_output.input['temperature'] = temperature_value
cmd_output.input['humidity'] = humidity_value  

cmd_output.compute()

print("Command is defined between 15 y 25")
print(cmd_output.output['command'])
if (cmd_output.output['command'] > 20):
  print('Warm Up')
elif  (cmd_output.output['command'] < 20 and cmd_output.output['command'] >18):
  print('No change')
else:
  print('Cool Up')


cmd.view(sim=cmd_output)
temp.view()
hum.view()